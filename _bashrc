#!/bin/bash

# todo-txt completion
_todotxtcli() {
  local cur=${COMP_WORDS[COMP_CWORD]}
  local pre=${COMP_WORDS[COMP_CWORD-1]}
  local cst="${COMP_WORDS[COMP_CWORD-2]}_${COMP_WORDS[COMP_CWORD-1]}"
  case $pre in
    mit )
      COMPREPLY=( $(compgen -W "today tomorrow monday tuesday wednesday thursday friday saturday sunday january february march april may june july august september october november december" -- $cur) )
      ;;
    * )
      if [[ $cst =~ ^mv_[0-9]+$ ]]; then
        COMPREPLY=( $(compgen -W "today tomorrow monday tuesday wednesday thursday friday saturday sunday january february march april may june july august september october november december" -- $cur) )
      else
        COMPREPLY=( $(compgen -W "mit `eval todo.sh lsprj` `eval todo.sh lsc`" -- $cur) )
      fi
      ;;
  esac
}
complete -F _todotxtcli t


# === Custom alias shortcuts ===
# Directory
alias atom='.a'
alias bin='.b'
# WWW
alias home=".h"
alias proj=".p"
alias projects=".p"
alias www=".w"
alias lav=".w laravel"
alias aad=".w testaad"
alias rgm=".w repro-gallery-master"

alias sym="ev SYMBOLS"
alias ls="ls -A"
alias la="ls -1"
alias ll="ls -l"
alias .a="cd_atom"
alias .b="cd_bin"
alias .h="cd_home"
alias .w="cd_www"
alias .p="cd_projects"
alias .="cd_to"
alias ..="cd_up"
alias compup="composer_update"
alias compglobup="composer global update"
alias tinker='(.w laravel && php_artisan tinker)'
alias show_files='defaults write com.apple.finder AppleShowAllFiles YES; killall Finder /System/Library/CoreServices/Finder.app'
alias hide_files='defaults write com.apple.finder AppleShowAllFiles NO; killall Finder /System/Library/CoreServices/Finder.app'
alias disk="diskutil"
alias t="todo.sh"
alias tai="todo_addon_install"
alias tarm="todo_addon_remove"
alias git-push='gac "Update packages" && gp master'
alias phpar="php_artisan"
alias updisplay="update_display 9cc7 610"
alias rr='sudo defaults read'
alias ww='sudo defaults write'
alias git-pull="gpl master"
alias envp='printenv'
alias e="echo"
alias ev="printenv"
alias laravel-mod="sudo chmod -R 777 storage/ bootstrap/ database/migrations/"
alias tinker="(artisan tinker)"
alias tinkerglob="(www laravel && artisan tinker)"


function restore_dir() {
  local DIR=`cat "$DIR_LOG"`
  if [[ -n $DIR ]]; then
    cd "$DIR"
  fi

  echo -ne "" &> "$DIR_LOG"
}
# Restore previous working directory after reload shell.
restore_dir

function php_artisan() {
  php artisan $*
}
function composer_update() {
  composer update
}
function cd_atom() {
  cd "$HOME/.atom"
}
function cd_bin() {
  cd "$HOME/bin/$1"
}
function cd_home() {
  cd "$HOME/$1"
}
function cd_www() {
  cd "$HOME/www/$1"
}
function cd_projects() {
  cd "$HOME/projects/$1"
}
function cd_to() {
  cd "$PWD/$1"
}
function cd_up() {
  cd "../$1"
}
function take() {
  if [[ -z "$1" ]]; then
    echo "Please enter directory name."
  else
    if [[ ! -e "$1" ]]; then
      mkdir -p "$1"
    fi

    cd "$1"
  fi
}
